
# TCP/IP网络模型与OSI网络模型
> ...


* TCP/IP分为哪几层？作用分别是？
	* 应用层：负责提供应用服务，如HTTP、FTP、DNS、SMTP等；
	* 传输层：负责端到端的传输，有TCP、UDP；
	* 网络层：负责网络包的封装、分片、路由、转发，有IP、ICMP、ARP；
	* 网络接口层：负载网络包在物理网络中的传输，如网络包的封帧、MAC寻址、差错检测、通过网卡传输网络帧等；
* OSI分为哪几层，作用分别是：
	* 应用层：给应用程序提供统一接口
	* 表示层：编码、解码
	* 会话层：建立、管理、终止实体之间的通话
	* 传输层：端到端的传输
	* 网络层：分片、寻址、路由
	* 数据链路层：封帧、MAC寻址
	* 物理层：物理网络中传输数据帧
* TCP/IP与OSI的对应关系：
	* TCP/IP的应用层--OSI的应用层、表示层、会话层
	* TCP/IP的传输层--OSI的传输层
	* TCP/IP的网络层--OSI的网络层
	* TCP/IP的网络接口层--OSI的数据链路层、物理层

# 键入网址到网页显示流程
> 涉及：HTTP、DNS、OS、TCP、IP、MAC、网卡、交换机、路由器等


* 浏览器解析URL，获取域名、访问路径等信息，生成HTTP请求信息
	* 
* 查DNS获取域名对应的IP地址信息
	* 域名解析流程（比如要获取www.server.com的IP地址）
		* 访问缓存；
		* 访问本地域名服务器；
		* 根据本地域名服务器保存的根域名服务器的地址`.`，访问根域名服务器；
		* 根据根域名服务器返回的顶级域名服务器的地址`.com`，访问顶级域名服务器；
		* 根据顶级域名服务器返回的权威域名服务器的地址`server.com`，访问权威域名服务器；
		* 权威域名服务器返回`server.com`的IP地址给本地域名服务器，本地域名服务器将地址返回给客户端；
* 封装HTTP消息
* 调用Socket库发送HTTP消息
* 封装成TCP
* 封装成IP
* 封装成MAC
* 由网卡驱动程序控制网卡发送二进制数据
* 交换机
* 路由器
* 到达目的服务器进行解封装


# Linux如何收发网络包
> 参考资料：
>  [Linux 网络包发送过程](https://mp.weixin.qq.com/s/wThfD9th9e_-YGHJJ3HXNQ)
>  [Linux 网络数据接收流程（TCP）- NAPI](https://wenfh2020.com/2021/12/29/kernel-tcp-receive/)
>  [Linux网络-数据包接收过程](https://blog.csdn.net/frank_jb/article/details/115841622)


> 从下图中可以看到：
> 	应用程序通过系统调用，来跟Socket层进行数据交互；
> 	Socket层下面就是传输层、网络层、网络接口层；
> 	最下面的一层，是网卡驱动程序和硬件网卡设备；
![](Linux网络协议栈.png)

* Linux接收网络包流程：
* Linux发送网络包流程：

> 在Linux中，全部的数据包都用一个结构体`sk_buff`来描述，对于每一种协议对应的数据包，只需要移动该结构体中`data`的指针即可；这样可以避免大量的数据拷贝的工作；


* 接收网络数据时，涉及几次内存拷贝操作？
* 发送网络数据时，涉及几次内存拷贝操作？


# HTTP
